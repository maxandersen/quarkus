ifdef::context[:parent-context: {context}]
[id="building-a-custom-graalvm-distribution_{context}"]
= Building a custom GraalVM distribution
:context: building-a-custom-graalvm-distribution

In order to create a custom GraalVM distribution (necessary for usage
in quarkus) you must switch to the vm subdirectory, and use special
build options to pick the modules in your distribution.

For a simple subset VM with just substrate and its native tools execute
the following:

[source,shell]
----
 cd ../vm
 mx --dy /substratevm,/tools build
 tar -czvf my-custom-graal.tgz -C latest_graalvm .
----

For a stock CE build the following will do:

[source,shell]
----
mx --dy /substratevm,/tools,/sulong,/graal-nodejs build
tar -czvf my-custom-graal.tgz -C latest_graalvm .
----


ifdef::parent-context[:context: {parent-context}]
ifndef::parent-context[:!context:]