ifdef::context[:parent-context: {context}]
[id="programmatic-access-to-the-kv-secret-engine_{context}"]
= Programmatic access to the KV secret engine
:context: programmatic-access-to-the-kv-secret-engine

Sometimes secrets are retrieved from an arbitrary path that is known only at runtime through an application
specific property, or a method argument for instance.
In that case it is possible to inject a Quarkus VaultKVSecretEngine, and retrieve secrets programmatically.

For instance, in `GreetingResource`, add:

[source,java]
----
@Inject
VaultKVSecretEngine kvSecretEngine;

...

@GET
@Path("/secrets/{vault-path}")
@Produces(MediaType.TEXT_PLAIN)
public String getSecrets(@PathParam("vault-path") String vaultPath) {
    return kvSecretEngine.readSecret("myapps/vault-quickstart/" + vaultPath).toString();
}
----

Restart the application after rebuilding it, and test it with the new endpoint:

[source,shell]
----
curl http://localhost:8080/hello/secrets/db
----

You should see:

[source,shell]
----
{password=connor}
----


ifdef::parent-context[:context: {parent-context}]
ifndef::parent-context[:!context:]