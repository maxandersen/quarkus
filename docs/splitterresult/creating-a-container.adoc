ifdef::context[:parent-context: {context}]
[id="creating-a-container_{context}"]
= Creating a container
:context: creating-a-container

[IMPORTANT,textlabel="Important",name="important"]
====
Before going further, be sure to have a working container runtime (Docker, podman) environment.
====

You can run the application in a container using the JAR produced by the Quarkus Maven Plugin.
However, in this guide we focus on creating a container image using the produced native executable.

image:containerization-process.png[Containerization Process]

By default, the native executable is tailored for your operating system (Linux, macOS, Windows etc).
Because the container may not use the same _executable_ format as the one produced by your operating system,
we will instruct the Maven build to produce an executable from inside a container:

[source,shell]
----
./mvnw package -Pnative -Dquarkus.native.container-build=true
----

[TIP,textlabel="Tip",name="tip"]
====
You can also select the container runtime to use with:[source,shell]
----
# Docker
./mvnw package -Pnative -Dquarkus.native.container-runtime=docker
# Podman
./mvnw package -Pnative -Dquarkus.native.container-runtime=podman
----These are normal Quarkus config properties, so if you always want to build in a container
it is recommended you add these to your `application.properties` so you do not need to specify them every time.
====

The produced executable will be a 64 bit Linux executable, so depending on your operating system it may no longer be runnable.
However, it's not an issue as we are going to copy it to a container.
The project generation has provided a `Dockerfile.native` in the `src/main/docker` directory with the following content:

[source,dockerfile]
----
FROM registry.access.redhat.com/ubi8/ubi-minimal
WORKDIR /work/
COPY target/*-runner /work/application
RUN chmod 775 /work
EXPOSE 8080
CMD ["./application", "-Dquarkus.http.host=0.0.0.0"]
----

Then, if you didn't delete the generated native executable, you can build the docker image with:

[source,shell]
----
docker build -f src/main/docker/Dockerfile.native -t quarkus-quickstart/getting-started .
----

And finally, run it with:

[source,shell]
----
docker run -i --rm -p 8080:8080 quarkus-quickstart/getting-started
----

[NOTE,textlabel="Note",name="note"]
====
Interested by tiny Docker images, check the {quarkus-images-url}/master/distroless[distroless] version.
====


ifdef::parent-context[:context: {parent-context}]
ifndef::parent-context[:!context:]